<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/969a6042/css/bootstrap.css" rel="stylesheet">
<link href="./assets/f28e901f/solarized_light.css" rel="stylesheet">
<link href="./assets/f194ff92/style.css" rel="stylesheet">
<script src="./assets/6e695b5a/jquery.js"></script>
<script src="./assets/969a6042/js/bootstrap.js"></script>
<script src="./assets/404086f/jssearch.js"></script>    <title>Yii Framework 2.0 API Documentation</title>
</head>
<body>

<div class="wrap">
    <nav id="w19023" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w19023-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./index.html">Yii Framework 2.0 API Documentation</a></div><div id="w19023-collapse" class="collapse navbar-collapse"><ul id="w19024" class="navbar-nav nav"><li><a href="./index.html">Class reference</a></li>
<li class="dropdown"><a class="dropdown-toggle" href="#" data-toggle="dropdown">Extensions <span class="caret"></span></a><ul id="w19025" class="dropdown-menu"><li><a href="./ext-apidoc-index.html" tabindex="-1">apidoc</a></li>
<li><a href="./ext-bootstrap-index.html" tabindex="-1">bootstrap</a></li>
<li><a href="./ext-composer-index.html" tabindex="-1">composer</a></li>
<li><a href="./ext-debug-index.html" tabindex="-1">debug</a></li>
<li><a href="./ext-faker-index.html" tabindex="-1">faker</a></li>
<li><a href="./ext-gii-index.html" tabindex="-1">gii</a></li>
<li><a href="./ext-swiftmailer-index.html" tabindex="-1">swiftmailer</a></li></ul></li>
<li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-3">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-19014" data-toggle="collapse" data-parent="#navigation">yii\debug <b class="caret"></b></a><div id="navigation-19014" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-debugasset.html">DebugAsset</a>
<a class="list-group-item" href="./yii-debug-flattenexception.html">FlattenException</a>
<a class="list-group-item" href="./yii-debug-logtarget.html">LogTarget</a>
<a class="list-group-item" href="./yii-debug-module.html">Module</a>
<a class="list-group-item" href="./yii-debug-panel.html">Panel</a>
<a class="list-group-item" href="./yii-debug-timelineasset.html">TimelineAsset</a>
<a class="list-group-item" href="./yii-debug-userswitchasset.html">UserswitchAsset</a></div>
<a class="list-group-item" href="#navigation-19015" data-toggle="collapse" data-parent="#navigation">yii\debug\actions\db <b class="caret"></b></a><div id="navigation-19015" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-actions-db-explainaction.html">ExplainAction</a></div>
<a class="list-group-item" href="#navigation-19016" data-toggle="collapse" data-parent="#navigation">yii\debug\components\search <b class="caret"></b></a><div id="navigation-19016" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-components-search-filter.html">Filter</a></div>
<a class="list-group-item" href="#navigation-19017" data-toggle="collapse" data-parent="#navigation">yii\debug\components\search\matchers <b class="caret"></b></a><div id="navigation-19017" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-components-search-matchers-base.html">Base</a>
<a class="list-group-item" href="./yii-debug-components-search-matchers-greaterthan.html">GreaterThan</a>
<a class="list-group-item" href="./yii-debug-components-search-matchers-greaterthanorequal.html">GreaterThanOrEqual</a>
<a class="list-group-item" href="./yii-debug-components-search-matchers-lowerthan.html">LowerThan</a>
<a class="list-group-item" href="./yii-debug-components-search-matchers-matcherinterface.html">MatcherInterface</a>
<a class="list-group-item" href="./yii-debug-components-search-matchers-sameas.html">SameAs</a></div>
<a class="list-group-item" href="#navigation-19018" data-toggle="collapse" data-parent="#navigation">yii\debug\controllers <b class="caret"></b></a><div id="navigation-19018" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-controllers-defaultcontroller.html">DefaultController</a>
<a class="list-group-item" href="./yii-debug-controllers-usercontroller.html">UserController</a></div>
<a class="list-group-item" href="#navigation-19019" data-toggle="collapse" data-parent="#navigation">yii\debug\models <b class="caret"></b></a><div id="navigation-19019" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-models-router.html">Router</a>
<a class="list-group-item" href="./yii-debug-models-userswitch.html">UserSwitch</a></div>
<a class="list-group-item" href="#navigation-19020" data-toggle="collapse" data-parent="#navigation">yii\debug\models\search <b class="caret"></b></a><div id="navigation-19020" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-models-search-base.html">Base</a>
<a class="list-group-item" href="./yii-debug-models-search-db.html">Db</a>
<a class="list-group-item" href="./yii-debug-models-search-debug.html">Debug</a>
<a class="list-group-item" href="./yii-debug-models-search-event.html">Event</a>
<a class="list-group-item" href="./yii-debug-models-search-log.html">Log</a>
<a class="list-group-item" href="./yii-debug-models-search-mail.html">Mail</a>
<a class="list-group-item" href="./yii-debug-models-search-profile.html">Profile</a>
<a class="list-group-item" href="./yii-debug-models-search-user.html">User</a>
<a class="list-group-item" href="./yii-debug-models-search-usersearchinterface.html">UserSearchInterface</a></div>
<a class="list-group-item" href="#navigation-19021" data-toggle="collapse" data-parent="#navigation">yii\debug\models\timeline <b class="caret"></b></a><div id="navigation-19021" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-models-timeline-dataprovider.html">DataProvider</a>
<a class="list-group-item" href="./yii-debug-models-timeline-search.html">Search</a>
<a class="list-group-item" href="./yii-debug-models-timeline-svg.html">Svg</a></div>
<a class="list-group-item" href="#navigation-19022" data-toggle="collapse" data-parent="#navigation">yii\debug\panels <b class="caret"></b></a><div id="navigation-19022" class="submenu panel-collapse collapse"><a class="list-group-item" href="./yii-debug-panels-assetpanel.html">AssetPanel</a>
<a class="list-group-item" href="./yii-debug-panels-configpanel.html">ConfigPanel</a>
<a class="list-group-item" href="./yii-debug-panels-dbpanel.html">DbPanel</a>
<a class="list-group-item" href="./yii-debug-panels-eventpanel.html">EventPanel</a>
<a class="list-group-item" href="./yii-debug-panels-logpanel.html">LogPanel</a>
<a class="list-group-item" href="./yii-debug-panels-mailpanel.html">MailPanel</a>
<a class="list-group-item" href="./yii-debug-panels-profilingpanel.html">ProfilingPanel</a>
<a class="list-group-item" href="./yii-debug-panels-requestpanel.html">RequestPanel</a>
<a class="list-group-item" href="./yii-debug-panels-routerpanel.html">RouterPanel</a>
<a class="list-group-item" href="./yii-debug-panels-timelinepanel.html">TimelinePanel</a>
<a class="list-group-item" href="./yii-debug-panels-userpanel.html">UserPanel</a></div></div>    </div>
    <div class="col-md-9 api-content" role="main">
        <p align="center">
    <a href="https://github.com/yiisoft" target="_blank">
        <img src="https://avatars0.githubusercontent.com/u/993323" height="100px">
    </a>
    <h1 align="center">Debug Extension for Yii 2</h1>
<div class="toc"><ol><li><a href="#installation">Installation</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#open-files-in-ide">Open Files in IDE</a></li></ol></div>

    <br>
</p>
<p>This extension provides a debugger for <a href="http://www.yiiframework.com">Yii framework 2.0</a> applications. When this extension is used,
a debugger toolbar will appear at the bottom of every page. The extension also provides
a set of standalone pages to display more detailed debug information.</p>
<p>For license information check the <a href="LICENSE.md">LICENSE</a>-file.</p>
<p>Documentation is at <a href="docs/guide/README.md">docs/guide/README.md</a>.</p>
<p><a href="https://packagist.org/packages/yiisoft/yii2-debug"><img src="https://poser.pugx.org/yiisoft/yii2-debug/v/stable.png" alt="Latest Stable Version" /></a>
<a href="https://packagist.org/packages/yiisoft/yii2-debug"><img src="https://poser.pugx.org/yiisoft/yii2-debug/downloads.png" alt="Total Downloads" /></a>
<a href="https://travis-ci.org/yiisoft/yii2-debug"><img src="https://travis-ci.org/yiisoft/yii2-debug.svg?branch=master" alt="Build Status" /></a></p>
<h2>Installation <span id="installation"></span><a href="#installation" class="hashlink">&para;</a></h2><p>The preferred way to install this extension is through <a href="http://getcomposer.org/download/">composer</a>.</p>
<p>Either run</p>
<pre><code class="hljs nginx"><span class="hljs-title">php</span> composer.phar require --prefer-dist yiisoft/yii2-<span class="hljs-built_in">debug</span>
</code></pre>
<p>or add</p>
<pre><code class="hljs bash"><span class="hljs-string">"yiisoft/yii2-debug"</span>: <span class="hljs-string">"~2.0.0"</span>
</code></pre>
<p>to the require section of your <code>composer.json</code> file.</p>
<h2>Usage <span id="usage"></span><a href="#usage" class="hashlink">&para;</a></h2><p>Once the extension is installed, simply modify your application configuration as follows:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-string">'bootstrap'</span> =&gt; [<span class="hljs-string">'debug'</span>],
    <span class="hljs-string">'modules'</span> =&gt; [
        <span class="hljs-string">'debug'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
            <span class="hljs-comment">// uncomment and adjust the following to add your IP if you are not connecting from localhost.</span>
            <span class="hljs-comment">//'allowedIPs' =&gt; ['127.0.0.1', '::1'],</span>
        ],
        <span class="hljs-comment">// ...</span>
    ],
    ...
];
</code></pre>
<p>You will see a debugger toolbar showing at the bottom of every page of your application.
You can click on the toolbar to see more detailed debug information.</p>
<h2>Open Files in IDE <span id="open-files-in-ide"></span><a href="#open-files-in-ide" class="hashlink">&para;</a></h2><p>You can create a link to open files in your favorite IDE with this configuration:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-string">'bootstrap'</span> =&gt; [<span class="hljs-string">'debug'</span>],
    <span class="hljs-string">'modules'</span> =&gt; [
        <span class="hljs-string">'debug'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\debug\Module'</span>,
            <span class="hljs-string">'traceLine'</span> =&gt; <span class="hljs-string">'&lt;a href="phpstorm://open?url={file}&amp;line={line}"&gt;{file}:{line}&lt;/a&gt;'</span>,
            <span class="hljs-comment">// uncomment and adjust the following to add your IP if you are not connecting from localhost.</span>
            <span class="hljs-comment">//'allowedIPs' =&gt; ['127.0.0.1', '::1'],</span>
        ],
        <span class="hljs-comment">// ...</span>
    ],
    ...
];
</code></pre>
<p>You must make some changes to your OS. See these examples: </p>
<ul>
<li>PHPStorm: <a href="https://github.com/aik099/PhpStormProtocol">https://github.com/aik099/PhpStormProtocol</a></li>
<li>Sublime Text 3 on Windows or Linux: <a href="https://packagecontrol.io/packages/subl%20protocol">https://packagecontrol.io/packages/subl protocol</a></li>
<li>Sublime Text 3 on Mac: <a href="https://github.com/inopinatus/sublime_url">https://github.com/inopinatus/sublime_url</a></li>
</ul>
<h4>Virtualized or dockerized <span id="virtualized-or-dockerized"></span><a href="#virtualized-or-dockerized" class="hashlink">&para;</a></h4><p>If your application is run under a virtualized or dockerized environment, it is often the case that the application's base path is different inside of the virtual machine or container than on your host machine. For the links work in those situations, you can configure <code>traceLine</code> like this (change the path to your app):</p>
<pre><code class="hljs php language-php"><span class="hljs-string">'traceLine'</span> =&gt; <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(<span class="hljs-variable">$options</span>, <span class="hljs-variable">$panel</span>)</span> </span>{
    <span class="hljs-variable">$filePath</span> = str_replace(Yii::<span class="hljs-variable">$app</span>-&gt;basePath, <span class="hljs-string">'~/path/to/your/app'</span>, <span class="hljs-variable">$options</span>[<span class="hljs-string">'file'</span>]);
    <span class="hljs-keyword">return</span> strtr(<span class="hljs-string">'&lt;a href="ide://open?url=file://{file}&amp;line={line}"&gt;{text}&lt;/a&gt;'</span>, [<span class="hljs-string">'{file}'</span> =&gt; <span class="hljs-variable">$filePath</span>]);
},
</code></pre>
<h1>Class Reference</h1>

<table class="summaryTable docIndex table table-bordered table-striped table-hover">
    <colgroup>
        <col class="col-package" />
        <col class="col-class" />
        <col class="col-description" />
    </colgroup>
    <tr>
        <th>Class</th>
        <th>Description</th>
    </tr>
    <tr>
        <td><a href="yii-debug-debugasset.html">yii\debug\DebugAsset</a></td>
        <td>Debugger asset bundle</td>
    </tr>
    <tr>
        <td><a href="yii-debug-flattenexception.html">yii\debug\FlattenException</a></td>
        <td>FlattenException wraps a PHP Exception to be able to serialize it.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-logtarget.html">yii\debug\LogTarget</a></td>
        <td>The debug LogTarget is used to store logs for later use in the debugger tool</td>
    </tr>
    <tr>
        <td><a href="yii-debug-module.html">yii\debug\Module</a></td>
        <td>The Yii Debug Module provides the debug toolbar and debugger</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panel.html">yii\debug\Panel</a></td>
        <td>Panel is a base class for debugger panel classes. It defines how data should be collected,
what should be displayed at debug toolbar and on debugger details view.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-timelineasset.html">yii\debug\TimelineAsset</a></td>
        <td>Timeline asset bundle</td>
    </tr>
    <tr>
        <td><a href="yii-debug-userswitchasset.html">yii\debug\UserswitchAsset</a></td>
        <td>Userswitch asset bundle</td>
    </tr>
    <tr>
        <td><a href="yii-debug-actions-db-explainaction.html">yii\debug\actions\db\ExplainAction</a></td>
        <td>ExplainAction provides EXPLAIN information for SQL queries</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-filter.html">yii\debug\components\search\Filter</a></td>
        <td>Provides array filtering capabilities.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-matchers-base.html">yii\debug\components\search\matchers\Base</a></td>
        <td>Base class for matchers that are used in a filter.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-matchers-greaterthan.html">yii\debug\components\search\matchers\GreaterThan</a></td>
        <td>Checks if the given value is greater than the base one.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-matchers-greaterthanorequal.html">yii\debug\components\search\matchers\GreaterThanOrEqual</a></td>
        <td>Checks if the given value is greater than or equal the base one.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-matchers-lowerthan.html">yii\debug\components\search\matchers\LowerThan</a></td>
        <td>Checks if the given value is lower than the base one.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-matchers-matcherinterface.html">yii\debug\components\search\matchers\MatcherInterface</a></td>
        <td>MatcherInterface should be implemented by all matchers that are used in a filter.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-components-search-matchers-sameas.html">yii\debug\components\search\matchers\SameAs</a></td>
        <td>Checks if the given value is exactly or partially same as the base one.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-controllers-defaultcontroller.html">yii\debug\controllers\DefaultController</a></td>
        <td>Debugger controller provides browsing over available debug logs.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-controllers-usercontroller.html">yii\debug\controllers\UserController</a></td>
        <td>User controller</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-router.html">yii\debug\models\Router</a></td>
        <td>Router model</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-userswitch.html">yii\debug\models\UserSwitch</a></td>
        <td>UserSwitch is a model used to temporary logging in another user</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-base.html">yii\debug\models\search\Base</a></td>
        <td>Base search model</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-db.html">yii\debug\models\search\Db</a></td>
        <td>Search model for current request database queries.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-debug.html">yii\debug\models\search\Debug</a></td>
        <td>Search model for requests manifest data.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-event.html">yii\debug\models\search\Event</a></td>
        <td>Event</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-log.html">yii\debug\models\search\Log</a></td>
        <td>Search model for current request log.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-mail.html">yii\debug\models\search\Mail</a></td>
        <td>Mail represents the model behind the search form about current send emails.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-profile.html">yii\debug\models\search\Profile</a></td>
        <td>Search model for current request profiling log.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-user.html">yii\debug\models\search\User</a></td>
        <td>Search model for implementation of IdentityInterface</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-search-usersearchinterface.html">yii\debug\models\search\UserSearchInterface</a></td>
        <td>UserSearchInterface is the interface that should be implemented by a class
providing identity information and search method.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-timeline-dataprovider.html">yii\debug\models\timeline\DataProvider</a></td>
        <td>DataProvider implements a data provider based on a data array.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-timeline-search.html">yii\debug\models\timeline\Search</a></td>
        <td>Search model for timeline data.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-models-timeline-svg.html">yii\debug\models\timeline\Svg</a></td>
        <td>Svg is used to draw a graph using SVG</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-assetpanel.html">yii\debug\panels\AssetPanel</a></td>
        <td>Debugger panel that collects and displays asset bundles data.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-configpanel.html">yii\debug\panels\ConfigPanel</a></td>
        <td>Debugger panel that collects and displays application configuration and environment.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-dbpanel.html">yii\debug\panels\DbPanel</a></td>
        <td>Debugger panel that collects and displays database queries performed.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-eventpanel.html">yii\debug\panels\EventPanel</a></td>
        <td>Debugger panel that collects and displays information about triggered events.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-logpanel.html">yii\debug\panels\LogPanel</a></td>
        <td>Debugger panel that collects and displays logs.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-mailpanel.html">yii\debug\panels\MailPanel</a></td>
        <td>Debugger panel that collects and displays the generated emails.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-profilingpanel.html">yii\debug\panels\ProfilingPanel</a></td>
        <td>Debugger panel that collects and displays performance profiling info.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-requestpanel.html">yii\debug\panels\RequestPanel</a></td>
        <td>Debugger panel that collects and displays request data.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-routerpanel.html">yii\debug\panels\RouterPanel</a></td>
        <td>RouterPanel provides a panel which displays information about routing process.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-timelinepanel.html">yii\debug\panels\TimelinePanel</a></td>
        <td>Debugger panel that collects and displays timeline data.</td>
    </tr>
    <tr>
        <td><a href="yii-debug-panels-userpanel.html">yii\debug\panels\UserPanel</a></td>
        <td>Debugger panel that collects and displays user data.</td>
    </tr>
</table>
    </div>
</div>

<script type="text/javascript">
    /*<![CDATA[*/
    $("a.toggle").on('click', function () {
        var $this = $(this);
        if ($this.hasClass('properties-hidden')) {
            $this.text($this.text().replace(/Show/,'Hide'));
            $this.parents(".summary").find(".inherited").show();
            $this.removeClass('properties-hidden');
        } else {
            $this.text($this.text().replace(/Hide/,'Show'));
            $this.parents(".summary").find(".inherited").hide();
            $this.addClass('properties-hidden');
        }

        return false;
    });
    /*
     $(".sourceCode a.show").toggle(function () {
     $(this).text($(this).text().replace(/show/,'hide'));
     $(this).parents(".sourceCode").find("div.code").show();
     },function () {
     $(this).text($(this).text().replace(/hide/,'show'));
     $(this).parents(".sourceCode").find("div.code").hide();
     });
     $("a.sourceLink").click(function () {
     $(this).attr('target','_blank');
     });
     */
    /*]]>*/
</script>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Thu, 16 Aug 2018 03:16:14 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
